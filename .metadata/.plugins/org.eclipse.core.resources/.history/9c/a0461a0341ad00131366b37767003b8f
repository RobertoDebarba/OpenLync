//Referencias
//http://www.caelum.com.br/apostila-java-orientacao-objetos/apendice-sockets/#19-5-servidor
//http://pt.slideshare.net/akhilgouthamkotini/multi-user-chat-system-using-java1
 
import java.io.IOException;  
import java.io.PrintStream;
import java.net.ServerSocket;  
import java.net.Socket;
import java.util.ArrayList;
import java.util.List;

public class OpenLync {

	public static void main(String[] args) throws IOException {
	     new OpenLync().executa();
	}
	   
	private int porta;
   
	public OpenLync() {
		this.porta = 7609;
	}
   
	public void executa () throws IOException {
		@SuppressWarnings("resource")
		ServerSocket servidor = new ServerSocket(this.porta);
		System.out.println("Porta 7600 aberta!");
 
		while (true) {
			// aceita um cliente
			Socket cliente = servidor.accept();
			System.out.println("Nova conexão com o cliente " + cliente.getInetAddress().getHostAddress());
					
					
   
			// adiciona saida do cliente à lista
			PrintStream ps = new PrintStream(cliente.getOutputStream());
   
			// cria tratador de cliente numa nova thread
			TrataCliente tc = new TrataCliente(cliente);
			new Thread(tc).start();
		}
 
   }
 
/*   public void distribuiMensagem(String msg) {          Usado para distribuir para todos
     // envia msg para todo mundo
     for (PrintStream cliente : this.clientes) {
       cliente.println(msg);
     }
   }*/
   public static void mandaMensagem(String ipDestino, String msg){		   
	   
	   
	   
	   
	   // Até aqui obtive ajuda divina!
   }
   
 }
